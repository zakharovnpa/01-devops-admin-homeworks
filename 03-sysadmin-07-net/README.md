# 3.7. Компьютерные сети, лекция 2 - Захаров Сергей Николаевич

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

    **Ответ:**
    
* В используемой для учебных целях ОС Windows 10 нашлось 8 сетевых интерфейсов.  Для вывода информации о сетевых интерфейсах и их параметров настройки используется команда `ipconfig -all`
    
    ```bash
    
      Настройка протокола IP для Windows

         Имя компьютера  . . . . . . . . . : Sergey-PC
         Основной DNS-суффикс  . . . . . . : 
         Тип узла. . . . . . . . . . . . . : Гибридный
         IP-маршрутизация включена . . . . : Нет
         WINS-прокси включен . . . . . . . : Нет

      Адаптер Ethernet Ethernet 4:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Fortinet SSL VPN Virtual Ethernet Adapter
         Физический адрес. . . . . . . . . : 00-09-0F-AA-00-01
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер Ethernet Ethernet:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Realtek PCIe GBE Family Controller
         Физический адрес. . . . . . . . . : 00-E0-12-34-56-78
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер Ethernet VirtualBox Host-Only Network:

         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
         Физический адрес. . . . . . . . . : 0A-00-27-00-00-02
         DHCP включен. . . . . . . . . . . : Нет
         Автонастройка включена. . . . . . : Да
         Локальный IPv6-адрес канала . . . : fe80::8d6a:ded4:d4d3:1f4a%2(Основной) 
         IPv4-адрес. . . . . . . . . . . . : 192.168.56.1(Основной) 
         Маска подсети . . . . . . . . . . : 255.255.255.0
         Основной шлюз. . . . . . . . . : 
         IAID DHCPv6 . . . . . . . . . . . : 1225392167
         DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-1D-41-9E-00-E0-12-34-56-78
         DNS-серверы. . . . . . . . . . . : fec0:0:0:ffff::1%1
                                             fec0:0:0:ffff::2%1
                                             fec0:0:0:ffff::3%1
         NetBios через TCP/IP. . . . . . . . : Включен

      Адаптер беспроводной локальной сети Подключение по локальной сети* 2:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter
         Физический адрес. . . . . . . . . : 16-E6-FC-D3-41-61
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер беспроводной локальной сети Подключение по локальной сети* 3:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #2
         Физический адрес. . . . . . . . . : 26-E6-FC-D3-41-61
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер Ethernet Ethernet 2:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : TAP-Windows Adapter V9
         Физический адрес. . . . . . . . . : 00-FF-38-C9-91-FC
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер Ethernet Ethernet 3:

         Состояние среды. . . . . . . . : Среда передачи недоступна.
         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Fortinet Virtual Ethernet Adapter (NDIS 6.30)
         Физический адрес. . . . . . . . . : 00-09-0F-FE-00-01
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да

      Адаптер беспроводной локальной сети Беспроводная сеть 2:

         DNS-суффикс подключения . . . . . : 
         Описание. . . . . . . . . . . . . : Qualcomm Atheros AR922X Wireless Network Adapter
         Физический адрес. . . . . . . . . : 54-E6-FC-D3-41-61
         DHCP включен. . . . . . . . . . . : Да
         Автонастройка включена. . . . . . : Да
         Локальный IPv6-адрес канала . . . : fe80::8112:ba0d:cfab:d8d3%21(Основной) 
         IPv4-адрес. . . . . . . . . . . . : 192.168.1.22(Основной) 
         Маска подсети . . . . . . . . . . : 255.255.255.0
         Аренда получена. . . . . . . . . . : 29 октября 2021 г. 22:00:57
         Срок аренды истекает. . . . . . . . . . : 1 ноября 2021 г. 16:20:04
         Основной шлюз. . . . . . . . . : 192.168.1.1
         DHCP-сервер. . . . . . . . . . . : 192.168.1.1
         IAID DHCPv6 . . . . . . . . . . . : 156559100
         DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-1D-41-9E-00-E0-12-34-56-78
         DNS-серверы. . . . . . . . . . . : 192.168.1.1
         NetBios через TCP/IP. . . . . . . . : Включен

    ```
* В виртуальной ОС Linux нашлось два сетевых интерфейса `eth0`, `lo`. Команда `ifconfig` или `ip link show`
```bash
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:73:60:cf brd ff:ff:ff:ff:ff:ff

```
![ip-link-show](/03-sysadmin-07-net/img/image3.png)

![ip-link-show](/03-sysadmin-07-net/img/image2.png)

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

    **Ответ:**
    
    Для распознования соседей по сетевому интерфейсу используется протокол LLDP (Link Layer Discovery Protocol) - протокол обнаружения канального уровня. Это протокол уровня 2, не зависящий от поставщика, который позволяет сетевому устройству сообщать о своей идентичности и возможностях в локальной сети.
    
    В Linux применяются утилиты `lldpctl`, `lldpcli`
   
   Соседей не обнаружилось :blush::
   
  ![lldp-show](/03-sysadmin-07-net/img/image4.png)
  
   Но мы готовы к встрече с соседями :family: через `eth0` :
 
  ![lldpctl](/03-sysadmin-07-net/img/image5.png)

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

    **Ответ:**

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

    **Ответ:**

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

    **Ответ:**
    
    * В сети с маской /29 всего 8 ip адресов. Из них:
      - первый адрес - адрес сети
      - шесть адресов хостов
      - восьмой адрес (последний) - широковещательный

    * В сети с маской /24 можно получить 32 сети с маской /29. 
    Вывод команды `ipcalc  10.10.10.0/24 /29`
    
    ```bash
         vagrant@vagrant:~$ ipcalc  10.10.10.0/24 /29
         Address:   10.10.10.0           00001010.00001010.00001010. 00000000
         Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
         Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
         =>
         Network:   10.10.10.0/24        00001010.00001010.00001010. 00000000
         HostMin:   10.10.10.1           00001010.00001010.00001010. 00000001
         HostMax:   10.10.10.254         00001010.00001010.00001010. 11111110
         Broadcast: 10.10.10.255         00001010.00001010.00001010. 11111111
         Hosts/Net: 254                   Class A, Private Internet

         Subnets after transition from /24 to /29

         Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
         Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111

          1.
         Network:   10.10.10.0/29        00001010.00001010.00001010.00000 000
         HostMin:   10.10.10.1           00001010.00001010.00001010.00000 001
         HostMax:   10.10.10.6           00001010.00001010.00001010.00000 110
         Broadcast: 10.10.10.7           00001010.00001010.00001010.00000 111
         Hosts/Net: 6                     Class A, Private Internet

          2.
         Network:   10.10.10.8/29        00001010.00001010.00001010.00001 000
         HostMin:   10.10.10.9           00001010.00001010.00001010.00001 001
         HostMax:   10.10.10.14          00001010.00001010.00001010.00001 110
         Broadcast: 10.10.10.15          00001010.00001010.00001010.00001 111
         Hosts/Net: 6                     Class A, Private Internet

          3.
         Network:   10.10.10.16/29       00001010.00001010.00001010.00010 000
         HostMin:   10.10.10.17          00001010.00001010.00001010.00010 001
         HostMax:   10.10.10.22          00001010.00001010.00001010.00010 110
         Broadcast: 10.10.10.23          00001010.00001010.00001010.00010 111
         Hosts/Net: 6                     Class A, Private Internet

          4.
         Network:   10.10.10.24/29       00001010.00001010.00001010.00011 000
         HostMin:   10.10.10.25          00001010.00001010.00001010.00011 001
         HostMax:   10.10.10.30          00001010.00001010.00001010.00011 110
         Broadcast: 10.10.10.31          00001010.00001010.00001010.00011 111
         Hosts/Net: 6                     Class A, Private Internet

          5.
         Network:   10.10.10.32/29       00001010.00001010.00001010.00100 000
         HostMin:   10.10.10.33          00001010.00001010.00001010.00100 001
         HostMax:   10.10.10.38          00001010.00001010.00001010.00100 110
         Broadcast: 10.10.10.39          00001010.00001010.00001010.00100 111
         Hosts/Net: 6                     Class A, Private Internet

          6.
         Network:   10.10.10.40/29       00001010.00001010.00001010.00101 000
         HostMin:   10.10.10.41          00001010.00001010.00001010.00101 001
         HostMax:   10.10.10.46          00001010.00001010.00001010.00101 110
         Broadcast: 10.10.10.47          00001010.00001010.00001010.00101 111
         Hosts/Net: 6                     Class A, Private Internet

          7.
         Network:   10.10.10.48/29       00001010.00001010.00001010.00110 000
         HostMin:   10.10.10.49          00001010.00001010.00001010.00110 001
         HostMax:   10.10.10.54          00001010.00001010.00001010.00110 110
         Broadcast: 10.10.10.55          00001010.00001010.00001010.00110 111
         Hosts/Net: 6                     Class A, Private Internet

          8.
         Network:   10.10.10.56/29       00001010.00001010.00001010.00111 000
         HostMin:   10.10.10.57          00001010.00001010.00001010.00111 001
         HostMax:   10.10.10.62          00001010.00001010.00001010.00111 110
         Broadcast: 10.10.10.63          00001010.00001010.00001010.00111 111
         Hosts/Net: 6                     Class A, Private Internet

          9.
         Network:   10.10.10.64/29       00001010.00001010.00001010.01000 000
         HostMin:   10.10.10.65          00001010.00001010.00001010.01000 001
         HostMax:   10.10.10.70          00001010.00001010.00001010.01000 110
         Broadcast: 10.10.10.71          00001010.00001010.00001010.01000 111
         Hosts/Net: 6                     Class A, Private Internet

          10.
         Network:   10.10.10.72/29       00001010.00001010.00001010.01001 000
         HostMin:   10.10.10.73          00001010.00001010.00001010.01001 001
         HostMax:   10.10.10.78          00001010.00001010.00001010.01001 110
         Broadcast: 10.10.10.79          00001010.00001010.00001010.01001 111
         Hosts/Net: 6                     Class A, Private Internet

          11.
         Network:   10.10.10.80/29       00001010.00001010.00001010.01010 000
         HostMin:   10.10.10.81          00001010.00001010.00001010.01010 001
         HostMax:   10.10.10.86          00001010.00001010.00001010.01010 110
         Broadcast: 10.10.10.87          00001010.00001010.00001010.01010 111
         Hosts/Net: 6                     Class A, Private Internet

          12.
         Network:   10.10.10.88/29       00001010.00001010.00001010.01011 000
         HostMin:   10.10.10.89          00001010.00001010.00001010.01011 001
         HostMax:   10.10.10.94          00001010.00001010.00001010.01011 110
         Broadcast: 10.10.10.95          00001010.00001010.00001010.01011 111
         Hosts/Net: 6                     Class A, Private Internet

          13.
         Network:   10.10.10.96/29       00001010.00001010.00001010.01100 000
         HostMin:   10.10.10.97          00001010.00001010.00001010.01100 001
         HostMax:   10.10.10.102         00001010.00001010.00001010.01100 110
         Broadcast: 10.10.10.103         00001010.00001010.00001010.01100 111
         Hosts/Net: 6                     Class A, Private Internet

          14.
         Network:   10.10.10.104/29      00001010.00001010.00001010.01101 000
         HostMin:   10.10.10.105         00001010.00001010.00001010.01101 001
         HostMax:   10.10.10.110         00001010.00001010.00001010.01101 110
         Broadcast: 10.10.10.111         00001010.00001010.00001010.01101 111
         Hosts/Net: 6                     Class A, Private Internet

          15.
         Network:   10.10.10.112/29      00001010.00001010.00001010.01110 000
         HostMin:   10.10.10.113         00001010.00001010.00001010.01110 001
         HostMax:   10.10.10.118         00001010.00001010.00001010.01110 110
         Broadcast: 10.10.10.119         00001010.00001010.00001010.01110 111
         Hosts/Net: 6                     Class A, Private Internet

          16.
         Network:   10.10.10.120/29      00001010.00001010.00001010.01111 000
         HostMin:   10.10.10.121         00001010.00001010.00001010.01111 001
         HostMax:   10.10.10.126         00001010.00001010.00001010.01111 110
         Broadcast: 10.10.10.127         00001010.00001010.00001010.01111 111
         Hosts/Net: 6                     Class A, Private Internet

          17.
         Network:   10.10.10.128/29      00001010.00001010.00001010.10000 000
         HostMin:   10.10.10.129         00001010.00001010.00001010.10000 001
         HostMax:   10.10.10.134         00001010.00001010.00001010.10000 110
         Broadcast: 10.10.10.135         00001010.00001010.00001010.10000 111
         Hosts/Net: 6                     Class A, Private Internet

          18.
         Network:   10.10.10.136/29      00001010.00001010.00001010.10001 000
         HostMin:   10.10.10.137         00001010.00001010.00001010.10001 001
         HostMax:   10.10.10.142         00001010.00001010.00001010.10001 110
         Broadcast: 10.10.10.143         00001010.00001010.00001010.10001 111
         Hosts/Net: 6                     Class A, Private Internet

          19.
         Network:   10.10.10.144/29      00001010.00001010.00001010.10010 000
         HostMin:   10.10.10.145         00001010.00001010.00001010.10010 001
         HostMax:   10.10.10.150         00001010.00001010.00001010.10010 110
         Broadcast: 10.10.10.151         00001010.00001010.00001010.10010 111
         Hosts/Net: 6                     Class A, Private Internet

          20.
         Network:   10.10.10.152/29      00001010.00001010.00001010.10011 000
         HostMin:   10.10.10.153         00001010.00001010.00001010.10011 001
         HostMax:   10.10.10.158         00001010.00001010.00001010.10011 110
         Broadcast: 10.10.10.159         00001010.00001010.00001010.10011 111
         Hosts/Net: 6                     Class A, Private Internet

          21.
         Network:   10.10.10.160/29      00001010.00001010.00001010.10100 000
         HostMin:   10.10.10.161         00001010.00001010.00001010.10100 001
         HostMax:   10.10.10.166         00001010.00001010.00001010.10100 110
         Broadcast: 10.10.10.167         00001010.00001010.00001010.10100 111
         Hosts/Net: 6                     Class A, Private Internet

          22.
         Network:   10.10.10.168/29      00001010.00001010.00001010.10101 000
         HostMin:   10.10.10.169         00001010.00001010.00001010.10101 001
         HostMax:   10.10.10.174         00001010.00001010.00001010.10101 110
         Broadcast: 10.10.10.175         00001010.00001010.00001010.10101 111
         Hosts/Net: 6                     Class A, Private Internet

          23.
         Network:   10.10.10.176/29      00001010.00001010.00001010.10110 000
         HostMin:   10.10.10.177         00001010.00001010.00001010.10110 001
         HostMax:   10.10.10.182         00001010.00001010.00001010.10110 110
         Broadcast: 10.10.10.183         00001010.00001010.00001010.10110 111
         Hosts/Net: 6                     Class A, Private Internet

          24.
         Network:   10.10.10.184/29      00001010.00001010.00001010.10111 000
         HostMin:   10.10.10.185         00001010.00001010.00001010.10111 001
         HostMax:   10.10.10.190         00001010.00001010.00001010.10111 110
         Broadcast: 10.10.10.191         00001010.00001010.00001010.10111 111
         Hosts/Net: 6                     Class A, Private Internet

          25.
         Network:   10.10.10.192/29      00001010.00001010.00001010.11000 000
         HostMin:   10.10.10.193         00001010.00001010.00001010.11000 001
         HostMax:   10.10.10.198         00001010.00001010.00001010.11000 110
         Broadcast: 10.10.10.199         00001010.00001010.00001010.11000 111
         Hosts/Net: 6                     Class A, Private Internet

          26.
         Network:   10.10.10.200/29      00001010.00001010.00001010.11001 000
         HostMin:   10.10.10.201         00001010.00001010.00001010.11001 001
         HostMax:   10.10.10.206         00001010.00001010.00001010.11001 110
         Broadcast: 10.10.10.207         00001010.00001010.00001010.11001 111
         Hosts/Net: 6                     Class A, Private Internet

          27.
         Network:   10.10.10.208/29      00001010.00001010.00001010.11010 000
         HostMin:   10.10.10.209         00001010.00001010.00001010.11010 001
         HostMax:   10.10.10.214         00001010.00001010.00001010.11010 110
         Broadcast: 10.10.10.215         00001010.00001010.00001010.11010 111
         Hosts/Net: 6                     Class A, Private Internet

          28.
         Network:   10.10.10.216/29      00001010.00001010.00001010.11011 000
         HostMin:   10.10.10.217         00001010.00001010.00001010.11011 001
         HostMax:   10.10.10.222         00001010.00001010.00001010.11011 110
         Broadcast: 10.10.10.223         00001010.00001010.00001010.11011 111
         Hosts/Net: 6                     Class A, Private Internet

          29.
         Network:   10.10.10.224/29      00001010.00001010.00001010.11100 000
         HostMin:   10.10.10.225         00001010.00001010.00001010.11100 001
         HostMax:   10.10.10.230         00001010.00001010.00001010.11100 110
         Broadcast: 10.10.10.231         00001010.00001010.00001010.11100 111
         Hosts/Net: 6                     Class A, Private Internet

          30.
         Network:   10.10.10.232/29      00001010.00001010.00001010.11101 000
         HostMin:   10.10.10.233         00001010.00001010.00001010.11101 001
         HostMax:   10.10.10.238         00001010.00001010.00001010.11101 110
         Broadcast: 10.10.10.239         00001010.00001010.00001010.11101 111
         Hosts/Net: 6                     Class A, Private Internet

          31.
         Network:   10.10.10.240/29      00001010.00001010.00001010.11110 000
         HostMin:   10.10.10.241         00001010.00001010.00001010.11110 001
         HostMax:   10.10.10.246         00001010.00001010.00001010.11110 110
         Broadcast: 10.10.10.247         00001010.00001010.00001010.11110 111
         Hosts/Net: 6                     Class A, Private Internet

          32.
         Network:   10.10.10.248/29      00001010.00001010.00001010.11111 000
         HostMin:   10.10.10.249         00001010.00001010.00001010.11111 001
         HostMax:   10.10.10.254         00001010.00001010.00001010.11111 110
         Broadcast: 10.10.10.255         00001010.00001010.00001010.11111 111
         Hosts/Net: 6                     Class A, Private Internet


         Subnets:   32
         Hosts:     192

    ```

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

    **Ответ:**
    
    

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

    **Ответ:**



 ---
## Задание для самостоятельной отработки (необязательно к выполнению)

 8*. Установите эмулятор EVE-ng.
 
 Инструкция по установке - https://github.com/svmyasnikov/eve-ng

 Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng. 
 
   **Ответ:**
 
 ---

Утилиты из лекции:

ip - show / manipulate routing, network devices, interfaces and tunnels
