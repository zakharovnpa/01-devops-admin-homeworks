# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки" - Захаров Сергей Николаевич

## Обязательные задания

### 1. Есть скрипт:
```bash
	a=1
	b=2
	c=a+b
	d=$a+$b
	e=$(($a+$b))
```
	* Какие значения переменным c,d,e будут присвоены?
	* Почему?
	
   **Ответ:**
   
   * для $с будет присвоено значение ` a+b `, т.к. мы сами задали $c строковое значение
   * для $d будет присвоено значение ` 1+2 `, т.к. для $a и $b было присвоено нетипизированное значение, которое считается строкой, а строки не суммируются. В итоге получится: символ 1, символ +, символ 2.
   * для $e будет присвоено значение ` 3 `, т.к. двойные скобки ` (($a+$b)) ` - команда для проебразования 1 и 2 в числа и операцию суммирования. Также работают ` [$a+$b] `

### 2. На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:

 ```bash
	while ((1==1)
	do
	curl https://localhost:4757
	if (($? != 0))
	then
	date >> curl.log
	fi
	done
 ```
   **Ответ:**

   * Необходмо в первой строке скрипта вместо однарной скобки ` ) ` поставить двойную скобку ` )) `. Иначе bash не сможет сделать арифметическую операцию сравнения ` ((1==1)) `
   * Необходимо добавить условие выхода из цикла ` else exit ` в том случае, если команда ` curl https://localhost:4757 ` завершится успешно. 
   * Необходимо добавить интервал проверки доступности, которого сейчас нет. Например, командой sleep. Иначе файл логов будет быстро расти.

  
  Результат:

```bash
    while (( 1 == 1 ))
    do
        curl https://localhost:4757
        if (($? != 0))
        then
            date >> curl.log
        else exit
        fi
        sleep 10
    done
```

### 3. Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

   **Ответ:**

### 4. Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается

   **Ответ:**

## Дополнительное задание (со звездочкой*) - необязательно к выполнению

Мы хотим, чтобы у нас были красивые сообщения для коммитов в репозиторий. Для этого нужно написать локальный хук для git, который будет проверять, что сообщение в коммите содержит код текущего задания в квадратных скобках и количество символов в сообщении не превышает 30. Пример сообщения: \[04-script-01-bash\] сломал хук.

   **Ответ:**

---
let
let is a shell builtin

 type declare
declare is a shell builtin

type set
set is a shell builtin



